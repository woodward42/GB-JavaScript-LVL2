<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hamburger</title>
</head>
<style>
    body{
        padding: 20px;
        background-color:bisque;
    }
</style>
<body>
<!--
Некая сеть фастфуда предлагает несколько видов гамбургеров:

### Маленький (50 рублей, 20 калорий).
### Большой (100 рублей, 40 калорий). 

### Гамбургер может быть с одним из нескольких видов начинок (обязательно):
    ### С сыром (+10 рублей, +20 калорий).
    ### С салатом (+20 рублей, +5 калорий).
    ### С картофелем (+15 рублей, +10 калорий). 

    ### Напишите программу, рассчитывающую стоимость и калорийность гамбургера. 
-->  
<h2>Hello, Hamburger!</h2>
<form action="#" method="post" id="burgerForm">
    Выберите размер гамбургера<br>
    <select name="size" id="size">
        <option value="big">Большой</option>
        <option value="small">Маленький</option>
    </select>
    <br>
    <br>
    Выберите одну или несколько начинок<br>
    <input type="checkbox" name="cheese" id="cheese">
    <label for="cheese">Сыр</label>
    <input type="checkbox" name="salad" id="salad">
    <label for="salad">Салат</label>
    <input type="checkbox" name="potato" id="potato">
    <label for="potato">Картофель</label>
    <br>
    <br>
    <input type="submit" value="Собрать гамбургер">
    <br>
    <br>
    Итого: <strong><span id="summary"></span></strong>
</form>

<script>
    const options = document.querySelectorAll('#size option')   //подскажите, как правильней было получить значение выбранного селекта?
    const form = document.querySelector('#burgerForm')
    const summary = document.querySelector('#summary')

    //функция, возвращающая выбранные чекбоксы с начинкой
    const getStuffings = () => {
        //получаем все инпуты-чекбоксы
        const stuffingNodes = document.querySelectorAll('input[type="checkbox"]')

        //rest оператором приводим к массиву, проверяем, выбран ли чекбокс, если да, то добавляем в новый массив
        //checked можно было проверить на уровне querySelectAll, но я понял это поздно))
        const stuffingNamesArr = [...stuffingNodes].filter(item => item.checked).map(item => item.name)
        
        return stuffingNamesArr
        
    }

    //по этой кнопке собирается гамбургер
    form.addEventListener('submit', evt => {
        //отключаем отправку формы по умолчанию
        evt.preventDefault()

        //получаем размер бургера
        const sizing = options[0].selected ? options[0].value : options[1].value //подскажите, как правильней было получить значение выбранного селекта?
            //console.log(size)

        //получаем начинку(и) бургера
        const stuffing = getStuffings()
            //console.log(stuffing)

        //если не выбрана ни одна начинка - выдаём алерт и прекращаем выполнение функции
        if (stuffing.length < 1){
            alert('Должна быть выбрана хотя бы одна начинка!')
            return
        }
        else {
            const ham = new Hamburger(sizing, stuffing)
            summary.innerHTML = `Вы собрали вкуснейший гамбургер стоимостью ${ham.getCost()}у.е. и калорийностью ${ham.getCalories()} ккал`
            
        }
    })



    class Hamburger {
        constructor(size, stuff){
            this.size = size
            this.stuff = stuff
            this._sizeData = {  //типа словарь
                'big': { 
                    cost: 100, 
                    calories: 40
                },
                'small': { 
                    cost: 50, 
                    calories: 20
                },
            }
            this._stuffData = {  
                'cheese': { cost: 10, calories: 20},
                'salad': { cost: 20, calories: 5},
                'potato': { cost: 15, calories: 10},
            }

        }
        getCost(){
            //стоимость в зависимости от размера + стоимость каждого элемента массива начинок
            return this._sizeData[this.size].cost + this.stuff.reduce((sum,item) => sum + this._stuffData[item].cost, 0)
        }
        getCalories(){
            //калорийность в зависимости от размера + калорийность каждого элемента массива начинок
            return this._sizeData[this.size].calories + this.stuff.reduce((sum,item) => sum + this._stuffData[item].calories, 0) 
        }
    }

</script>


</body>
</html>